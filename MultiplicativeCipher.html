<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cipher Simulation</title>
</head>
<style>
    h1{
        margin-left: 50px; 
    }
    div {
        background-color: white;
        margin-left: 50px; margin-bottom: 50px; margin-right: 50px;
        text-align: center;
        padding: 50px; height: 530px; padding-top: 10px;
    }
    h3 {
        display: flex; justify-content: flex-end;
        gap: 50px; padding-right: 30px; margin-bottom: 50px;
    }
</style>

<body style="background-color: rgb(212, 255, 254);">
    <h1>Multiplicative Cipher Simulation</h1>
    <div>
        <h3>
            <a href="CaeserCipher.html" style="text-decoration: none;"><span>Caesar Cipher</span></a>
            <a href="MultiplicativeCipher.html" style="text-decoration: none;"><span>Multiplicative Cipher</span></a>
        </h3>

        <label>Enter Text</label>
        <input type="text" id="text" placeholder="Enter message" style="padding:8px; width:220px; border-radius:6px; border:1px solid #aaa;"><br><br>

        <label>Key Value</label>
        <input type="number" id="shift" placeholder="e.g. 3" style="padding:8px; width:220px; border-radius:6px; border:1px solid #aaa;"><br><br>

        <button onclick="encrypt()" style="padding:8px 20px; border-radius:15px; border:2px solid rgb(134, 215, 214); background:rgb(212, 255, 254); color:black; cursor:pointer; margin-left:10px;">
            Encrypt
        </button>

        <button onclick="decrypt()" style="padding:8px 20px; border-radius:15px; border:2px solid rgb(134, 215, 214); background:rgb(212, 255, 254); color:black; cursor:pointer; margin-left:10px;">
            Decrypt
        </button>

        <h4 style="margin-top:25px;">Result:</h4>
        <p id="result"></p>

    </div>

    <script>
        function encrypt() {
            let text = document.getElementById("text").value.toUpperCase();
            let key = parseInt(document.getElementById("shift").value);
            let result = "";

            let validKeys = [1,3,5,7,9,11,15,17,19,21,23,25];

            if (!validKeys.includes(key)) {
                alert("Invalid key! Key must be coprime with 26.");
                return;
            }

            for (let i = 0; i < text.length; i++) {
                let char = text.charCodeAt(i);

                if (char >= 65 && char <= 90) {
                    let encrypted = ((char - 65) * key) % 26 + 65;
                    result += String.fromCharCode(encrypted);
                } else {
                    result += text[i];
                }
            }

            document.getElementById("result").innerText = result;
        }

        function decrypt() {
            let text = document.getElementById("text").value.toUpperCase();
            let key = parseInt(document.getElementById("shift").value);
            let result = "";

            let inverseMap = {
                1:1, 3:9, 5:21, 7:15, 9:3, 11:19,
                15:7, 17:23, 19:11, 21:5, 23:17, 25:25
            };

            if (!inverseMap[key]) {
                alert("Invalid key! Key must be coprime with 26.");
                return;
            }

            let inverseKey = inverseMap[key];

            for (let i = 0; i < text.length; i++) {
                let char = text.charCodeAt(i);

                if (char >= 65 && char <= 90) {
                    let decrypted = ((char - 65) * inverseKey) % 26 + 65;
                    result += String.fromCharCode(decrypted);
                } else {
                    result += text[i];
                }
            }

            document.getElementById("result").innerText = result;
        }
    </script>
</body>
</html>